<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>éš¨æ©Ÿå¥å­ç”¢ç”Ÿå™¨ - æ¯æ—¥é‡‘å¥ + ç²’å­ + æœå°‹æ¨™ç±¤</title>
    <link rel="icon" href="æ“·å–.PNG">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Barrels+Bold&display=swap">

    <style>
        /* ---------- åŸºæœ¬èˆ‡å‹•ç•« ---------- */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);} }
        @keyframes sparkleMove { from { transform: translateY(0) scale(0.6); opacity: 1;} to { transform: translateY(-40px) scale(1.2); opacity: 0;} }
        @keyframes shine { 0% { left: -120%; } 60% { left: 120%; } 100% { left: 120%; } }

        :root{
            --bg1: #E8CEE0;
            --accent: #A0527F;
            --accent-2: #8B457A;
            --muted: #D3B8CC;
            --card-bg: rgba(255,255,255,0.72);
            --tag-bg: #F5E8EE;
            --soft-1: #5C3A55;
            --soft-2: #A0527F;
            --soft-3: #8B457A;
        }

        html,body{
            height:100%;
            margin:0;
            font-family: 'Noto Serif TC', serif;
            background: var(--bg1);
            overflow-x:hidden;
        }

        /* canvas èƒŒæ™¯è“‹åœ¨æœ€ä¸‹æ–¹ */
        #star-canvas {
            position: fixed;
            left: 0;
            top: 0;
            width:100%;
            height:100%;
            z-index: 0;
            pointer-events: none;
        }

        /* ä¸»è¦å®¹å™¨ç½®æ–¼ canvas ä¹‹ä¸Š */
        .page {
            position: relative;
            z-index: 2;
            min-height: 100vh;
            display:flex;
            flex-direction:column;
            align-items:center;
            padding: 20px;
            box-sizing: border-box;
        }

        header {
            text-align:center;
            margin-top: 8px;
        }

        h1 {
            font-weight:700;
            margin:10px 0 6px 0;
            font-size:2.6rem;
            background: linear-gradient(45deg, #FF69B4, #8B457A, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.08);
        }

        #count-display {
            margin-bottom:12px;
            font-size:1.05rem;
            color: var(--accent-2);
            background: rgba(255,255,255,0.55);
            padding:6px 12px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display:inline-block;
        }

        main {
            width:100%;
            max-width: 980px;
            display:flex;
            flex-direction:column;
            align-items:center;
            gap:18px;
            margin-top:8px;
        }

        /* å¥å­å¡ç‰‡ (éœ§ç»ç’ƒ) */
        #quote-box {
            width:100%;
            background: var(--card-bg);
            border-radius: 16px;
            padding: 36px 28px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
            min-height: 140px;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            transition: transform 0.28s ease;
            backdrop-filter: blur(8px) saturate(1.05);
            -webkit-backdrop-filter: blur(8px) saturate(1.05);
            position: relative;
            overflow: visible;
        }

        /* ç•¶æœ‰ pop é¡åˆ¥æ™‚åšå¾®æ”¾å¤§æ•ˆæœ */
        #quote-box.pop { transform: scale(1.02); }

        #quote-text {
            font-size:1.65rem;
            line-height:1.6;
            margin:0;
            color: #333;
            animation: fadeIn 0.8s ease-out;
            text-align:center;
            max-width: 900px;
            word-break:break-word;
        }

        strong { font-family: 'Barrels Bold', sans-serif; display:block; margin-top:10px; font-size:0.85rem; }

        #quote-footer { margin-top:12px; min-height:22px; display:flex; gap:6px; flex-wrap:wrap; justify-content:center; }

        .tag-display {
            display:inline-block;
            background: var(--tag-bg);
            border-radius: 6px;
            padding: 4px 10px;
            font-size:0.92rem;
            color: var(--accent-2);
        }

        /* æ§åˆ¶å€ (filter + button) */
        #controls-wrapper {
            width:100%;
            max-width: 980px;
            display:flex;
            gap:18px;
            align-items:flex-start;
            justify-content:center;
        }

        #filter-container {
            flex:1;
            background: rgba(255,255,255,0.55);
            padding:12px;
            border-radius: 12px;
            box-shadow: 0 4px 18px rgba(0,0,0,0.08);
            min-width: 260px;
            max-height: 160px;
            overflow: hidden;
        }

        #filter-container h2 { margin:0 0 8px 0; font-size:1.05rem; color: var(--soft-1); font-weight:500; }

        #tag-search {
            width:100%;
            padding:8px 10px;
            margin-bottom:8px;
            border-radius:8px;
            border:1px solid rgba(0,0,0,0.06);
            outline:none;
            box-sizing:border-box;
        }

        #tag-buttons {
            max-height:90px;
            overflow-y:auto;
            padding-right:6px;
        }

        .filter-button {
            background: var(--tag-bg);
            color: var(--accent-2);
            border:1px solid var(--muted);
            border-radius:20px;
            padding:6px 12px;
            margin:5px 6px 6px 0;
            cursor:pointer;
            transition: all 0.18s;
            display:inline-block;
            font-size:0.92rem;
            white-space:nowrap;
        }

        .filter-button:hover { transform: translateY(-3px); background:#E3A3C9; color:#fff; }
        .filter-button.selected { background: var(--accent); color:#fff; border-color: var(--accent-2); box-shadow: 0 0 8px rgba(160,82,127,0.4); }

        /* åœ“å½¢ GO æŒ‰éˆ• */
        #generate-button {
            width:110px;
            height:110px;
            border-radius:50%;
            background: var(--accent);
            border:5px solid #E3A3C9;
            color:#fff;
            font-size:1.25rem;
            font-weight:700;
            cursor:pointer;
            box-shadow: 0 0 12px #FFD700, 0 0 20px #E3A3C9, 0 0 30px var(--accent);
            display:flex;
            align-items:center;
            justify-content:center;
            position:relative;
            flex-shrink:0;
            transition: transform 0.18s ease;
            outline:none;
        }

        #generate-button:hover { transform: scale(1.07); }
        #generate-button:active { transform: scale(0.96); }

        /* é–ƒå…‰æƒæ */
        #generate-button::after {
            content:"";
            position:absolute;
            left:-150%;
            top:0;
            width:150%;
            height:100%;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.35), transparent);
            transform: skewX(-20deg);
            animation: shine 2.8s infinite;
            pointer-events:none;
        }

        /* æ‰‹æ©ŸéŸ¿æ‡‰ */
        @media (max-width:720px) {
            #controls-wrapper { flex-direction: column; align-items:center; gap:12px; }
            #filter-container { width:92%; max-width:640px; }
            #generate-button { width:88px; height:88px; font-size:1.05rem; }
            #quote-text { font-size:1.25rem; padding:0 8px; }
        }

        /* sparkles (ç”Ÿæˆæ™‚çš„æ˜Ÿå…‰å…ƒç´ ) */
        .sparkle {
            position:absolute;
            width:8px;
            height:8px;
            border-radius:50%;
            pointer-events:none;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,1) 0%, rgba(255,255,255,0.7) 10%, rgba(160,82,127,0.25) 40%, rgba(160,82,127,0) 60%);
            animation: sparkleMove 700ms ease-out forwards;
            z-index: 5;
            filter: blur(0.6px);
        }

        /* ä»Šæ—¥é‡‘å¥å°è§’æ¨™ */
        .badge-daily {
            position:absolute;
            top:12px;
            left:12px;
            background: linear-gradient(90deg,#FFD700,#FFA07A);
            padding:6px 10px;
            border-radius:12px;
            font-weight:600;
            font-size:0.9rem;
            color:#4b2a2a;
            box-shadow: 0 3px 10px rgba(0,0,0,0.16);
        }

    </style>
</head>
<body>
    <!-- ç²’å­ canvas -->
    <canvas id="star-canvas"></canvas>

    <div class="page">
        <header>
            <h1>ğŸŒ¸ éš¨æ©Ÿå¥å­ç”¢ç”Ÿå™¨ ğŸ•¯ï¸</h1>
            <div id="count-display">æ‚¨ä»Šå¤©å·²ç²å¾— <span id="quote-count">0</span> å¥åŠ›é‡ ğŸ’ª</div>
        </header>

        <main>
            <div id="quote-box" aria-live="polite">
                <div class="badge-daily" id="daily-badge" style="display:none">ä»Šæ—¥é‡‘å¥</div>
                <p id="quote-text">è«‹å…ˆé¸æ“‡æ‚¨å–œæ­¡çš„å¥å­é¡å‹ï¼</p>
                <div id="quote-footer"></div>
            </div>

            <div id="controls-wrapper">
                <div id="filter-container" aria-label="ç¯©é¸æ¨™ç±¤">
                    <h2>é¸æ“‡å¥å­é¡å‹ (å¯å¤šé¸ 1~3 é …)ï¼š</h2>
                    <input type="search" id="tag-search" placeholder="ğŸ” æœå°‹æ¨™ç±¤..." aria-label="æœå°‹æ¨™ç±¤">
                    <div id="tag-buttons"></div>
                </div>

                <button id="generate-button" aria-label="ç”Ÿæˆæ–°å¥å­">
                    <span>GO!</span>
                </button>
            </div>
        </main>
    </div>
    
    <script>
        // åŒ…å«å¥å­ã€è‹±æ–‡å’Œæ¨™ç±¤çš„ç‰©ä»¶é™£åˆ— (å·²æ•´åˆæ‰€æœ‰å¥å­)
        const quotes = [
            // --- ç¬¬ä¸€æ¬¡çµ¦çš„åŸå‰µå¥å­ ---
            { zh: "ä¸€ç›´å¾ˆæƒ³å»åšçš„äº‹ï¼Œå»åšäº†å—ï¼Ÿ", en: "Did you do the thing you always wanted to do?", tags: ["è¡Œå‹•", "å¤¢æƒ³", "åæ€"] },
            { zh: "å¿ƒæ…‹æ±ºå®šç‹€æ…‹ã€‚", en: "Attitude determines altitude.", tags: ["æ…‹åº¦", "ç©æ¥µ", "å“²ç†"] },
            { zh: "çµ¦è‡ªå·±ä¸€å€‹å®Œæ•´çš„äº¤ä»£ï¼Œçµ¦åˆ¥äººä¸€å€‹ç¶“é©—çš„æˆæœã€‚", en: "Give yourself a full account, and others the fruit of experience.", tags: ["è‡ªæˆ‘æœŸè¨±", "è²¬ä»»"] },
            { zh: "ç´¯çš„æ™‚å€™ï¼Œæƒ³æƒ³ç•¶åˆç‚ºä»€éº¼é–‹å§‹ã€‚", en: "When you're tired, remember why you started.", tags: ["å …æŒ", "åˆè¡·", "é¼“å‹µ"] },
            { zh: "ç™¼éå…‰çš„äººï¼Œè«‹ä½ ä¸è¦é»¯æ·¡ã€‚", en: "Those who have shined, please do not fade.", tags: ["é¼“å‹µ", "è‡ªæˆ‘åƒ¹å€¼"] },
            { zh: "å¢®è½å’ŒåŠªåŠ›ä¸€æ¨£éƒ½æœƒä¸Šç™®ã€‚", en: "Falling and striving are both addictive.", tags: ["å“²ç†", "ç¿’æ…£"] },
            { zh: "é‚£äº›ä¸èƒ½æ®ºæ­»æˆ‘çš„ï¼Œéƒ½å°‡ä½¿æˆ‘æ›´å …å¼·ã€‚", en: "What doesn't kill me makes me stronger.", tags: ["å …å¼·", "æŒ‘æˆ°", "æˆé•·"] },
            { zh: "æˆé•·å¾ä¾†ä¸æ˜¯ä¾†è‡ªç‰©è³ªå †ç Œï¼Œè€Œæ˜¯ä¾†è‡ªä½ å¿ƒåº•é‚£ä»½ï¼Œå°è‡ªå·±æŠ«èŠæ–¬æ£˜çš„æº«æŸ”å®ˆè­·ã€‚", en: "Growth never comes from material accumulation, but from the gentle protection in your heart to blaze your own trail.", tags: ["æˆé•·", "æº«æŸ”", "å“²ç†"] },
            { zh: "æ—¥å­å˜›ï¼Œç¸«ç¸«è£œè£œé‚„èƒ½éã€‚", en: "Life is like that, patching it up, it can still go on.", tags: ["ç”Ÿæ´»", "è±é”"] },
            { zh: "é€™å€‹ä¸–ç•Œï¼Œæœ‰å€‹å¾ˆæ£’çš„äººï¼Œä»–æ­£åœ¨è®€é€™å¥è©±ã€‚", en: "There is a wonderful person in this world, and they are reading this sentence.", tags: ["æº«æš–", "é¼“å‹µ"] },
            { zh: "è¦ªæ„›çš„ï¼Œæ²’é—œä¿‚ï¼Œæ··äº‚ä¹Ÿæ˜¯æˆé•·çš„ä¸€éƒ¨ä»½ã€‚", en: "Dear, it's okay, chaos is also a part of growth.", tags: ["æ”¾é¬†", "æˆé•·"] },
            { zh: "è®Šå¥½çš„éç¨‹ï¼Œé€šå¸¸éƒ½ä¸æœƒå¤ªèˆ’æœã€‚", en: "The process of getting better is usually uncomfortable.", tags: ["æ”¹è®Š", "æŒ‘æˆ°"] },
            { zh: "åˆ¥å¿˜è¨˜èµ°ä¸Šé€™ä¸€æ¢è·¯çš„åˆè¡·æ˜¯ç”šéº¼ï¼Œä¸èƒ½åœ¨é™é€”ä¸­è¿·å¤±è‡ªå·±çš„æ–¹å‘ã€‚", en: "Don't forget the initial reason for walking this path, and don't lose your direction on the long journey.", tags: ["åˆè¡·", "æ–¹å‘", "ç›®æ¨™"] },
            { zh: "å¤±è½ä¸¦ä¸ä¸Ÿè‡‰ï¼Œå®ƒä»£è¡¨ä½ é‚„åœ¨ä¹ã€‚", en: "Being lost is not shameful; it means you still care.", tags: ["æƒ…ç·’", "è‡ªæˆ‘æ¥ç´"] },
            { zh: "ç”Ÿæ´»æ˜¯ä¸€åƒæ¬¡å´©æ½°ï¼Œä¸€åƒé›¶ä¸€æ¬¡æŒºä½ã€‚", en: "Life is a thousand breakdowns and a thousand and one times standing firm.", tags: ["ç”Ÿæ´»", "å …æŒ", "åŠ›é‡"] },
            { zh: "ä¸è¦çœ¼çœ¶ä¸€ç´…ï¼Œå°±è¦ºå¾—äººé–“ä¸å€¼å¾—ã€‚", en: "Don't feel the world is unworthy just because your eyes turn red.", tags: ["æƒ…ç·’", "åƒ¹å€¼"] },
            { zh: "å…è¨±è‡ªå·±æ˜¯é‚£æœµæ™šé–‹çš„èŠ±ã€‚", en: "Allow yourself to be the late blooming flower.", tags: ["æ™‚é–“", "ç¯€å¥", "è‡ªæˆ‘æ¥ç´"] },
            { zh: "æ’éå°±æ˜¯ä½ çš„ã€‚", en: "Endure it, and it will be yours.", tags: ["å …æŒ", "å¿è€", "æ”¶ç©«"] },
            { zh: "çœŸæ­£å‹‡æ•¢çš„äººï¼Œæ˜¯é‚£æ€•å«è‘—æ·šæ°´ä¹Ÿè¦ç¹¼çºŒå¥”è·‘çš„äººã€‚", en: "The truly brave person is one who continues to run, even with tears in their eyes.", tags: ["å‹‡æ•¢", "å‰é€²"] },
            { zh: "å¦‚æœé€™ä¸–ç•Œä¸ŠçœŸçš„æœ‰å¥‡è¹Ÿï¼Œé‚£åªæ˜¯åŠªåŠ›çš„å¦ä¸€å€‹åå­—ã€‚", en: "If there really is a miracle in this world, it is just another name for effort.", tags: ["å¥‡è¹Ÿ", "åŠªåŠ›", "ä¿¡å¿µ"] },
            { zh: "ä½ å¯ä»¥å‡è£åŠªåŠ›ï¼Œä½†çµæœä¸æœƒé™ªä½ æ¼”æˆ²ã€‚", en: "You can pretend to work hard, but the result won't play along.", tags: ["åŠªåŠ›", "èª å¯¦"] },
            { zh: "å¹¸é‹ä¾†è‡ªä½ ä¸ç‚ºäººçŸ¥çš„åŠªåŠ›ã€‚", en: "Luck comes from your unseen effort.", tags: ["å¹¸é‹", "åŠªåŠ›"] },
            { zh: "è¡Œå‹•äº¤çµ¦ç¾åœ¨ï¼Œçµæœäº¤ç”±æ™‚é–“ã€‚", en: "Action belongs to the present, the outcome belongs to time.", tags: ["è¡Œå‹•", "æ™‚é–“", "ç¾åœ¨"] },
            { zh: "æ¯å€‹äººçš„èŠ±æœŸä¸åŒï¼Œä¸å¿…ç„¦æ…®æœ‰äººæ¯”ä½ æå‰æ“æœ‰ã€‚", en: "Everyone has a different blooming period; don't be anxious that someone possesses things before you.", tags: ["ç¯€å¥", "ç¨ç‰¹"] },
            { zh: "ä¸æ˜¯æ¯å ´é›¨éƒ½è¦æ’å‚˜ï¼Œæœ‰äº›çœ¼æ·šæœƒè®“èŠ±é•·å‡ºä¾†ã€‚", en: "Not every rain requires an umbrella; some tears help flowers grow.", tags: ["æ‚²å‚·", "æˆé•·"] },
            { zh: "å¦‚æœä½ è¦ºå¾—èº«è™•åœ°ç„ï¼Œé‚£é‚„ä¸å¿«ç¹¼çºŒå¾€å‰èµ°ã€‚", en: "If you think you are in hell, why don't you keep going?", tags: ["å›°å¢ƒ", "å‰é€²", "å¹½é»˜"] },
            { zh: "å¿ƒè£¡æœ‰é¸æ“‡çš„è©±ï¼Œå …å®šå¥½äº†ã€‚", en: "If you have a choice in your heart, stand firm.", tags: ["é¸æ“‡", "ä¿¡å¿µ"] },
            { zh: "éç¨‹å¾ˆç´¯å¾ˆè‹¦ï¼Œä½†å¤¢æƒ³å¾ˆæ¸…æ¥šã€‚", en: "The process is tiring and bitter, but the dream is clear.", tags: ["å¤¢æƒ³", "éç¨‹"] },
            { zh: "åŠªåŠ›éå¾Œï¼Œä¸æ˜¯æˆåŠŸå°±æ˜¯æˆé•·ã€‚", en: "After effort, it's either success or growth.", tags: ["æˆé•·", "æˆåŠŸ"] },
            { zh: "äººç”Ÿå¾ä¾†æ²’æœ‰å°çš„é¸æ“‡ï¼Œåªæœ‰å°‡è‡ªå·±çš„é¸æ“‡è®Šæˆæ­£ç¢ºç­”æ¡ˆçš„éç¨‹ã€‚", en: "Life never has the right choice, only the process of making your choice the right answer.", tags: ["äººç”Ÿ", "é¸æ“‡", "å“²ç†"] },
            { zh: "ç•¶ä½ å¤ å¼·ï¼Œæ˜¯åˆ€éƒ½å¾€è‚©ä¸Šæ‰›ã€‚", en: "When you are strong enough, you carry every knife on your shoulder.", tags: ["å¼·å¤§", "æ‰¿æ“”"] },
            { zh: "ä¸è¦æƒ³è‘—å®Œç¾ï¼Œè€Œæ˜¯å¥½å¥½éç”Ÿæ´»ã€éç¾åœ¨ã€‚", en: "Don't aim for perfection, but live life well, live in the present.", tags: ["ç”Ÿæ´»", "ç¾åœ¨"] },
            { zh: "ä½ æ’éçš„æ¯ä¸€å€‹é»‘å¤œï¼Œéƒ½å€¼å¾—ä¸€é»æŒè²ã€‚", en: "Every dark night you endure deserves a round of applause.", tags: ["è‡ªæˆ‘è‚¯å®š", "é»‘å¤œ"] },
            { zh: "æˆ‘å€‘éƒ½æœ‰å„è‡ªçš„æ»¾ç‡™å’Œå†°éœœã€‚", en: "We all have our own heat and frost.", tags: ["è‡ªæˆ‘", "ç¨ç‰¹"] },

            // --- ç¬¬äºŒæ¬¡çµ¦çš„åè¨€èˆ‡æ ¼è¨€ (å·²åˆä½µåˆ†é¡) ---
            { zh: "äººç”Ÿå°±åƒé¨å–®è»Šï¼Œè¦ä¿æŒå¹³è¡¡ï¼Œå°±å¿…é ˆä¸€ç›´å‘å‰ã€‚", en: "Life is like riding a bicycle. To keep your balance, you must keep moving.", tags: ["å …æŒ", "å¹³è¡¡", "æ„›å› æ–¯å¦"] },
            { zh: "äºŒåå¹´å¾Œï¼Œä½ æœƒå› ç‚ºæ²’åšçš„äº‹è€Œæ¯”åšéçš„äº‹æ›´å¾Œæ‚”ã€‚", en: "Twenty years from now you will be more disappointed by the things that you didn't do than by the ones you did do.", tags: ["è¡Œå‹•", "å¾Œæ‚”", "é¦¬å…‹åæº«"] },
            { zh: "æˆ‘ä¸èƒ½æ”¹è®Šé¢¨å‘ï¼Œä½†æˆ‘èƒ½èª¿æ•´å¸†çš„æ–¹å‘ã€‚", en: "I can't change the direction of the wind, but I can adjust my sails to always reach my destination.", tags: ["æ”¹è®Š", "é©æ‡‰", "å‰ç±³è¿ªæ©"] },
            { zh: "å¤©æ‰æ˜¯ç™¾åˆ†ä¹‹ä¸€çš„éˆæ„Ÿï¼ŒåŠ ä¸Šç™¾åˆ†ä¹‹ä¹åä¹çš„æ±—æ°´ã€‚", en: "Genius is one percent inspiration, ninety-nine percent perspiration.", tags: ["åŠªåŠ›", "æ„›è¿ªç”Ÿ"] },
            { zh: "ç„¡è«–ä½ èªç‚ºè‡ªå·±è¡Œé‚„æ˜¯ä¸è¡Œï¼Œä½ éƒ½æ˜¯å°çš„ã€‚", en: "Whether you think you can, or you think you can't, you're right.", tags: ["è‡ªä¿¡", "ä¿¡å¿µ", "äº¨åˆ©ç¦ç‰¹"] },
            { zh: "æˆåŠŸå°±æ˜¯å¾å¤±æ•—åˆ°å¤±æ•—ï¼Œä¹Ÿä¾ç„¶ä¸æ”¹ç†±æƒ…ã€‚", en: "Success is going from failure to failure without losing your enthusiasm.", tags: ["æˆåŠŸ", "ç†±æƒ…", "ä¸˜å‰çˆ¾"] },
            { zh: "ç¬¬ä¸€æ­¥æ˜¯ä½ å¿…é ˆèªªï¼šã€Œæˆ‘è¾¦å¾—åˆ°ã€ã€‚", en: "The first step is you have to say that you can.", tags: ["è‡ªä¿¡", "è¡Œå‹•", "å¨çˆ¾å²å¯†æ–¯"] },
            { zh: "æˆ‘å€‘æ‡‰è©²æœ‰æ¯…åŠ›ï¼Œå°¤å…¶è¦æœ‰ä¿¡å¿ƒã€‚", en: "You must have perseverance and, above all, confidence.", tags: ["æ¯…åŠ›", "ä¿¡å¿ƒ", "ç‘ªéº—å±…é‡Œ"] },
            { zh: "è¡Œå‹•æ˜¯æˆåŠŸçš„åŸºç¤ï¼Œæ²’æœ‰è¡Œå‹•ï¼Œä¸€åˆ‡éƒ½æ˜¯ç©ºè«‡ã€‚", en: "Action is the foundational key to all success.", tags: ["è¡Œå‹•", "æˆåŠŸ", "æ´›å…‹è²å‹’"] },
            { zh: "æ¥å—è‡ªå·±çš„æ¥µé™ï¼Œæˆ‘å€‘æ‰èƒ½è¶…è¶Šè‡ªå·±ï¼", en: "Only when we accept our limits can we go beyond them.", tags: ["è¶…è¶Š", "æ„›å› æ–¯å¦"] },
            { zh: "ä¸æ‡ˆçš„åŠªåŠ›æ˜¯æˆåŠŸçš„åŸºçŸ³ã€‚", en: "Unremitting effort is the cornerstone of success.", tags: ["åŠªåŠ›", "åŸºç¤", "æˆåŠŸ"] },
            { zh: "æˆåŠŸçš„èŠ±ï¼Œäººå€‘åªé©šç¾¨å¥¹ç¾æ™‚çš„æ˜è‰·ï¼Œç„¶è€Œç•¶åˆå¥¹çš„èŠ½å…’ï¼Œå»æµ¸é€äº†å¥®é¬¥çš„æ·šæ³‰ã€‚", en: "People only marvel at the brilliance of the flower of success, yet its bud was soaked in the tears of struggle.", tags: ["å¥®é¬¥", "éç¨‹", "æ·šæ°´"] },
            { zh: "ä½ çš„æ…‹åº¦æ±ºå®šäº†ä½ çš„é«˜åº¦ã€‚", en: "Your attitude determines your altitude.", tags: ["æ…‹åº¦", "ç©æ¥µ"] },
            { zh: "å‹‡æ•¢é¢å°å›°é›£ï¼Œç”Ÿæ´»æ‰æœƒæ›´åŠ ç²¾å½©ã€‚", en: "Bravely face difficulties, and life will be more wonderful.", tags: ["å‹‡æ•¢", "å›°é›£", "ç²¾å½©"] },
            { zh: "æˆåŠŸä¸¦éå¶ç„¶ï¼Œè€Œæ˜¯ä¸æ–·åŠªåŠ›çš„çµæœã€‚", en: "Success is not accidental, but the result of continuous effort.", tags: ["åŠªåŠ›", "çµæœ", "æˆåŠŸ"] },
            { zh: "æˆåŠŸå¾ä¸çœ·é¡§ç­‰å¾…çš„äººã€‚", en: "Success never favors those who wait.", tags: ["è¡Œå‹•", "ç­‰å¾…"] },
            { zh: "ä¸æ€•è·¯é•·ï¼Œåªæ€•å¿—çŸ­ã€‚", en: "Fear not the length of the road, but the shortness of the will.", tags: ["å¿—å‘", "æ¯…åŠ›"] },
            { zh: "æ¯ä¸€æ¬¡å‰µå‚·éƒ½æ˜¯ä¸€æ¬¡æˆç†Ÿï¼Œæ¯ä¸€æ¬¡å¤±å»éƒ½æ˜¯ä¸€æ¬¡ç²å¾—ã€‚", en: "Every wound is a maturation, every loss is a gain.", tags: ["æˆé•·", "ç²å¾—", "å“²ç†"] },
            { zh: "åšè‡ªå·±æƒ³åšçš„äº‹ï¼Œå»è‡ªå·±æƒ³å»çš„åœ°æ–¹ã€‚", en: "Do what you want to do, go where you want to go.", tags: ["è‡ªç”±", "å¤¢æƒ³"] },
            { zh: "æ¯ä¸€å€‹ä½ ä¸æ»¿æ„çš„ç¾åœ¨ï¼Œéƒ½æœ‰ä¸€å€‹ä½ æ²’æœ‰åŠªåŠ›çš„æ›¾ç¶“ã€‚", en: "Every present you are dissatisfied with has a past where you did not put in the effort.", tags: ["åæ€", "ç¾åœ¨"] },
            { zh: "å‹‡æ•¢åœ°é‚å‡ºç¬¬ä¸€æ­¥ï¼ŒæˆåŠŸå°±åœ¨å‰æ–¹ã€‚", en: "Bravely take the first step, and success is ahead.", tags: ["å‹‡æ•¢", "æˆåŠŸ"] },
            { zh: "ä½ è‹¥ä¸å‹‡æ•¢ï¼Œæ²’äººæ›¿ä½ å …å¼·ã€‚", en: "If you are not brave, no one will be strong for you.", tags: ["ç¨ç«‹", "å …å¼·", "å‹‡æ•¢"] },
            { zh: "æ¯ä¸€å¤©éƒ½æ˜¯ä¸€å€‹æ–°çš„é–‹å§‹ï¼ŒåŠªåŠ›è®“è‡ªå·±è®Šå¾—æ›´å¥½ã€‚", en: "Every day is a new beginning; strive to make yourself better.", tags: ["é–‹å§‹", "åŠªåŠ›", "æ›´å¥½"] },
            { zh: "åªè¦è·¯æ˜¯å°çš„ï¼Œå°±ä¸æ€•è·¯é ã€‚", en: "As long as the path is correct, the distance doesn't matter.", tags: ["æ–¹å‘", "ç›®æ¨™"] },
            { zh: "ç”Ÿæ´»ç¸½æœƒæœ‰è¾¦æ³•è®“ä½ é‡æ–°é–‹å§‹ã€‚", en: "Life will always find a way to make you start over.", tags: ["ç”Ÿæ´»", "å¸Œæœ›", "é‡æ–°é–‹å§‹"] },
            { zh: "è¿½éš¨å¤¢æƒ³ï¼Œä¸å¿˜åˆå¿ƒã€‚", en: "Follow your dreams, never forget your original intention.", tags: ["å¤¢æƒ³", "åˆå¿ƒ", "è¿½éš¨"] },
            { zh: "æ¯ä¸€å€‹æˆåŠŸè€…éƒ½æœ‰ä¸€å€‹é–‹å§‹ã€‚å‹‡æ–¼é–‹å§‹ï¼Œæ‰èƒ½æ‰¾åˆ°æˆåŠŸçš„è·¯ã€‚", en: "Every successful person has a beginning. Dare to start to find the road to success.", tags: ["é–‹å§‹", "å‹‡æ°£", "æˆåŠŸ"] },
            { zh: "ä¸ç¶“æ­·é¢¨é›¨ï¼Œæ€èƒ½è¦‹å½©è™¹ã€‚", en: "How can you see the rainbow without experiencing wind and rain?", tags: ["é¢¨é›¨", "ç£¨ç·´", "æ”¶ç©«"] },
            { zh: "æˆåŠŸçš„é€Ÿåº¦éœ€è¦è·‘å¾—æ¯”åˆ¥äººå¿«ã€‚", en: "The speed of success needs to be faster than others.", tags: ["ç«¶çˆ­", "å“è¶Š"] },
            { zh: "ç”Ÿå‘½å¤ªçŸ­ï¼Œæ²’æ™‚é–“ç•™çµ¦éºæ†¾ã€‚", en: "Life is too short to leave room for regret.", tags: ["æ™‚é–“", "éºæ†¾", "ç•¶ä¸‹"] },
            { zh: "åªæœ‰ä½ è‡ªå·±èƒ½æ±ºå®šè‡ªå·±çš„å‘½é‹ã€‚", en: "Only you can decide your own destiny.", tags: ["å‘½é‹", "è‡ªä¸»", "è‡ªæˆ‘"] },
            { zh: "ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šæ‰èƒ½çœ‹å¾—æ›´é ã€‚", en: "Only by standing on the shoulders of giants can you see farther.", tags: ["å­¸ç¿’", "è¦–é‡"] },
            { zh: "æ¯å¤©éƒ½æ˜¯æ–°çš„æŒ‘æˆ°ï¼Œå‹‡æ•¢é¢å°ã€‚", en: "Every day is a new challenge, face it bravely.", tags: ["æŒ‘æˆ°", "å‹‡æ•¢", "é¢å°"] },
            { zh: "ä¸è¦å®³æ€•æ”¹è®Šï¼Œæ”¹è®Šæ˜¯æˆåŠŸçš„ç¬¬ä¸€æ­¥ã€‚", en: "Don't be afraid of change; change is the first step to success.", tags: ["æ”¹è®Š", "é–‹å§‹"] },
            { zh: "è¿½æ±‚å“è¶Šï¼ŒæˆåŠŸè‡ªç„¶æœƒè¿½éš¨ä½ ã€‚", en: "Pursue excellence, and success will naturally follow you.", tags: ["å“è¶Š", "æˆåŠŸ"] },
            { zh: "æ¯ä¸€å€‹åŠªåŠ›çš„ç¬é–“ï¼Œéƒ½æ˜¯åœ¨ç‚ºæˆåŠŸé‹ªè·¯ã€‚", en: "Every moment of effort is paving the way for success.", tags: ["åŠªåŠ›", "éç¨‹", "æˆåŠŸ"] },
            { zh: "å¤¢æƒ³ç¸½æœ‰å®ƒå¯¦ç¾çš„é“ç†ã€‚", en: "Dreams always have their reason for realization.", tags: ["å¤¢æƒ³", "å¯¦ç¾"] },
            { zh: "å‹‡æ•¢å»è¿½æ±‚ä½ æƒ³è¦çš„ç”Ÿæ´»ã€‚", en: "Be brave and pursue the life you want.", tags: ["å‹‡æ•¢", "ç”Ÿæ´»"] },
            { zh: "ä¿¡å¿µæ˜¯æˆ‘å€‘å¯¦ç¾å¤¢æƒ³çš„åŠ›é‡æºæ³‰ã€‚", en: "Faith is the source of our strength to realize our dreams.", tags: ["ä¿¡å¿µ", "åŠ›é‡", "å¤¢æƒ³"] },
            { zh: "æ¯ä¸€å€‹ä»Šå¤©éƒ½æ˜¯ä½ æœªä¾†çš„å¸Œæœ›ã€‚", en: "Every today is the hope of your future.", tags: ["å¸Œæœ›", "æœªä¾†"] },
            { zh: "æˆ‘å€‘éƒ½ç”Ÿæ´»åœ¨é™°æºè£¡ï¼Œä½†ä»æœ‰äº›äººä»°æœ›æ˜Ÿç©ºã€‚", en: "We are all in the gutter, but some of us are looking at the stars.", tags: ["å¤¢æƒ³", "å¸Œæœ›", "ç‹çˆ¾å¾·"] },
            { zh: "ç•¶ä¸€æ‰‡å¹¸ç¦ä¹‹é–€é—œé–‰æ™‚ï¼Œå¦ä¸€æ‰‡å°±æœƒæ‰“é–‹ã€‚", en: "When one door of happiness closes, another opens.", tags: ["å¸Œæœ›", "è½‰æ©Ÿ", "æ´›æ¡‘"] },
            { zh: "åšä½ è‡ªå·±ï¼Œå…¶ä»–è§’è‰²éƒ½å·²æœ‰äººåœ¨æ¼”ã€‚", en: "Be yourself; everyone else is already taken.", tags: ["è‡ªæˆ‘", "ç¨ç‰¹", "ç‹çˆ¾å¾·"] },
            { zh: "ä¸–é–“æœ€çè²´çš„ä¸æ˜¯â€å¾—ä¸åˆ°â€å’Œâ€å·²å¤±å»â€ï¼Œè€Œæ˜¯ç¾åœ¨èƒ½æŠŠæ¡çš„å¹¸ç¦ã€‚", en: "The most precious in the world is not 'can't get' and 'lost', but the happiness that can be grasped now.", tags: ["æŠŠæ¡", "å¹¸ç¦", "è˜‡æ ¼æ‹‰åº•"] },
            { zh: "ç©æ¥µçš„æ…‹åº¦æœƒå¸¶ä¾†ç©æ¥µçš„çµæœï¼Œå› ç‚ºæ…‹åº¦æ˜¯å…·æœ‰æ„ŸæŸ“åŠ›çš„ã€‚", en: "Positive attitude brings positive results because attitude is infectious.", tags: ["ç©æ¥µ", "æ…‹åº¦"] },
            { zh: "è¬äº‹è¬ç‰©çš†æœ‰è£‚ç—•ã€‚ å…‰å°±æ˜¯é€™æ¨£ç…§é€²ä¾†çš„ã€‚", en: "There is a crack in everything. That's how the light gets in.", tags: ["å¸Œæœ›", "ä¸å®Œç¾", "å“²ç†"] },
            { zh: "ç”Ÿæ´»å°±æ˜¯ç•¶æˆ‘å€‘å¿™è‘—åšå…¶ä»–è¨ˆåŠƒæ™‚ï¼Œæ‰€ç™¼ç”Ÿçš„äº‹æƒ…ã€‚", en: "Life is what happens to us while we are busy making other plans.", tags: ["ç”Ÿæ´»", "ç•¶ä¸‹", "ç´„ç¿°åˆ—å„‚"] },
            { zh: "å¦‚æœä½ ä¸èƒ½é£›ï¼Œé‚£å°±è·‘å§ ; å¦‚æœä½ ä¸èƒ½è·‘ï¼Œé‚£å°±èµ°å§ ; å¦‚æœä½ ä¸èƒ½èµ°è·¯ï¼Œé‚£å°±çˆ¬è¡Œã€‚ç„¡è«–æ€éº¼åšï¼Œéƒ½å¿…é ˆæŒçºŒåœ°å‰é€²ã€‚", en: "If you canâ€™t fly, then run. If you canâ€™t run, then walk. If you canâ€™t walk, then crawl. But whatever you do, you have to keep moving forward.", tags: ["å‰é€²", "å …æŒ", "é¦¬ä¸è·¯å¾·é‡‘"] },
            { zh: "æ”¹è®Šç„¡å¯é¿å…ï¼Œæ˜¯å¦èƒ½å¾ä¸­æˆé•·å‰‡æ˜¯ä½ çš„é¸æ“‡ã€‚", en: "Change is inevitable. Growth is optional.", tags: ["æ”¹è®Š", "æˆé•·", "é¸æ“‡"] },
            { zh: "æ¯å¤©é¬§éˆ´éƒ½æœƒé‡æ–°å•Ÿå‹•ã€‚å› æ­¤ä½ çš„å‹æ•—ä¸¦ä¸é‡è¦ã€‚ä¸è¦ç³¾çµéå»ç™¼ç”Ÿçš„äº‹ï¼Œç‚ºæ‰€æœ‰å¯èƒ½çš„æœªä¾†å¥®é¬¥ã€‚", en: "Every day the clock resets. Your wins don't matter. Your failures don't matter. Don't stress on what was, fight for what could be.", tags: ["æœªä¾†", "é‡æ–°é–‹å§‹", "å¥®é¬¥"] },
            { zh: "ä¸è¦ç•æ‡¼æ”¾æ£„æ‰€æ“æœ‰è€Œæ¨æ£„è¿½æ±‚å“è¶Šçš„æ©Ÿæœƒã€‚", en: "Don't be afraid to give up the good to go for the great.", tags: ["å“è¶Š", "è¿½æ±‚"] },
            { zh: "æ¯ä¸€å¤©éƒ½æœ‰å¥‡è¹Ÿç™¼ç”Ÿï¼Œæ”¹è®Šä½ å°å¥‡è¹Ÿçš„çœ‹æ³•ï¼Œä½ å°‡æœƒç™¼ç¾å¥‡è¹Ÿç„¡æ‰€ä¸åœ¨ã€‚", en: "Miracles happen every day, change your perception of what a miracle is and youâ€™ll see them all around you.", tags: ["å¥‡è¹Ÿ", "æ…‹åº¦"] },
            { zh: "å–„ç”¨ä½ çš„å„ªå‹¢ã€‚å¤šåšä½ æ“…é•·çš„äº‹æƒ…è€Œä¸æ˜¯é‚£äº›ä½ ä¸æ“…é•·çš„äº‹ã€‚", en: "Play to your strengths. If you arenâ€™t great at something, do more of what youâ€™re great at.", tags: ["å„ªå‹¢", "æ‰èƒ½", "å°ˆæ³¨"] },
            { zh: "å¤§å®¶åªæœƒæƒ³è‘—æ”¹è®Šä¸–ç•Œï¼Œå»å¾æ²’æƒ³éå…ˆæ”¹è®Šè‡ªå·±ã€‚", en: "Everyone thinks of changing the world, but no one thinks of changing himself.", tags: ["æ”¹è®Š", "è‡ªæˆ‘", "ä¸–ç•Œ"] },
            { zh: "å¾å¤±æ•—ä¸­å»ºé€ è‡ªå·±ã€‚å°‡å¤±æ•—ä½œç‚ºå¢Šè…³çŸ³ã€‚éå»çš„å°±è®“å®ƒéå»ï¼Œä¸éœ€è¦è©¦åœ–å¿˜è¨˜éŒ¯èª¤ï¼Œè€Œæ˜¯ä¸å¿…ç³¾çµæ–¼å®ƒã€‚", en: "You build on failure. You use it as a stepping stone. Close the door on the past. You don't try to forget the mistakes, but you don't dwell on it.", tags: ["å¤±æ•—", "æˆé•·", "æ”¾ä¸‹"] },
            { zh: "æ™‚ä»£å’Œç’°å¢ƒè®ŠåŒ–éå¸¸å¿«é€Ÿï¼Œå› æ­¤æˆ‘å€‘å¿…é ˆæŒçºŒå°‡ç›®å…‰èšç„¦åœ¨æœªä¾†ã€‚", en: "Times and conditions change so rapidly that we must keep our aim constantly focused on the future.", tags: ["æ”¹è®Š", "æœªä¾†", "è¦–é‡"] },
            { zh: "ä¸€ä½å­©ç«¥ã€ä¸€ä½è€å¸«ã€ä¸€æ”¯ç­†ã€ä¸€æœ¬æ›¸å°‡å¯ä»¥æ”¹è®Šä¸–ç•Œã€‚", en: "One child, one teacher, one pen, and one book can change the world.", tags: ["æ•™è‚²", "ä¸–ç•Œ", "åŠ›é‡"] },
            { zh: "æœ‰å²ä»¥ä¾†æœ€å‰å¤§çš„ç™¼ç¾æ˜¯ï¼Œä¸€å€‹äººå¯ä»¥é€šéæ”¹è®Šä»–çš„æ…‹åº¦ä¾†æ”¹è®Šä»–çš„æœªä¾†ã€‚", en: "The greatest discovery of all time is that a person can change his future by merely changing his attitude.", tags: ["æ…‹åº¦", "æœªä¾†", "æ”¹è®Š"] },
            { zh: "æ¯ä¸€ä½å‰å¤§çš„å¤¢æƒ³éƒ½ä¾†è‡ªæ–¼å‹‡æ•¢åšå¤¢çš„äººã€‚", en: "Every great dream begins with a dreamer. Always remember, you have within you the strength, the patience, and the passion to reach for the stars to change the world.", tags: ["å¤¢æƒ³", "åŠ›é‡", "æ”¹è®Š"] },
            { zh: "äº‹æƒ…æœƒæ”¹è®Šï¼Œæœ‹å‹æœƒé›¢å»ã€‚ç”Ÿå‘½ä¸æœƒç‚ºäº†ä»»ä½•äººè€Œåœæ­‡ã€‚", en: "Things change. And friends leave. Life doesnâ€™t stop for anybody.", tags: ["ç”Ÿæ´»", "æ”¹è®Š", "ç„¡å¸¸"] },
            { zh: "äº‹æƒ…ä¸æ˜¯è¶³ä»¥æ”¹è®Šä¸–ç•Œæ‰ç®—é‡è¦ã€‚", en: "Things donâ€™t have to change the world to be important.", tags: ["åƒ¹å€¼", "é‡è¦æ€§", "ç•¶ä¸‹"] }

            
        ];

       const quoteText = document.getElementById('quote-text');
        const quoteFooterDiv = document.getElementById('quote-footer');
        const generateButton = document.getElementById('generate-button');
        const tagButtonsContainer = document.getElementById('tag-buttons');
        const quoteCountDisplay = document.getElementById('quote-count');
        const tagSearchInput = document.getElementById('tag-search');
        const quoteBox = document.getElementById('quote-box');
        const dailyBadge = document.getElementById('daily-badge');

        const softColors = ['#5C3A55', '#A0527F', '#8B457A', '#333'];
        let currentSelectedTags = new Set();
        let lastQuote = null;
        let quoteCount = 0;
        let dailyQuoteIndex = null; // ç•¶å¤©å›ºå®šçš„ä»Šæ—¥é‡‘å¥ index

        // å–å¾—æ‰€æœ‰ä¸é‡è¤‡æ¨™ç±¤
        const allTags = new Set();
        quotes.forEach(q => q.tags.forEach(t => allTags.add(t)));
        const sortedTags = Array.from(allTags).sort();

        /********** æ—¥æœŸèˆ‡ LocalStorageï¼ˆä¿ç•™è¨ˆæ•¸ + ç•¶æ—¥é‡‘å¥ï¼‰ **********/
        function getTodayDate() {
            // ä½¿ç”¨æœ¬åœ°æ™‚å€çš„ YYYY-MM-DD
            const d = new Date();
            const yyyy = d.getFullYear();
            const mm = String(d.getMonth()+1).padStart(2,'0');
            const dd = String(d.getDate()).padStart(2,'0');
            return `${yyyy}-${mm}-${dd}`;
        }

        // storage çµæ§‹ï¼š { date: 'YYYY-MM-DD', count: Number, dailyIndex: Number }
        function loadQuoteData() {
            const stored = localStorage.getItem('quoteGeneratorData');
            const today = getTodayDate();

            if (stored) {
                try {
                    const data = JSON.parse(stored);
                    if (data.date === today) {
                        quoteCount = data.count || 0;
                        dailyQuoteIndex = (typeof data.dailyIndex === 'number') ? data.dailyIndex : null;
                    } else {
                        // æ–°çš„ä¸€å¤©ï¼šé‡è¨­ count ä¸¦è¨­å®š dailyIndex ç‚º nullï¼ˆæœƒåœ¨åˆå§‹åŒ–æ™‚å»ºç«‹ï¼‰
                        quoteCount = 0;
                        dailyQuoteIndex = null;
                        saveQuoteData(); // æ›´æ–° storage
                    }
                } catch(e) { quoteCount = 0; dailyQuoteIndex = null; saveQuoteData(); }
            } else {
                // æ²’æœ‰ç´€éŒ„
                quoteCount = 0;
                dailyQuoteIndex = null;
                saveQuoteData();
            }
            quoteCountDisplay.textContent = quoteCount;
        }

        function saveQuoteData() {
            const data = {
                date: getTodayDate(),
                count: quoteCount,
                dailyIndex: dailyQuoteIndex
            };
            localStorage.setItem('quoteGeneratorData', JSON.stringify(data));
            quoteCountDisplay.textContent = quoteCount;
        }

        /********** å»ºç«‹æ¨™ç±¤æŒ‰éˆ•ï¼ˆåŒ…å« #éš¨æ©Ÿï¼‰ **********/
        function createTagButtons() {
            // #éš¨æ©Ÿ æŒ‰éˆ•
            const randomBtn = document.createElement('button');
            randomBtn.className = 'filter-button selected';
            randomBtn.textContent = '#éš¨æ©Ÿ';
            randomBtn.dataset.tag = '#éš¨æ©Ÿ';
            randomBtn.addEventListener('click', handleTagClick);
            tagButtonsContainer.appendChild(randomBtn);
            currentSelectedTags.add('#éš¨æ©Ÿ');

            // å…¶é¤˜æ¨™ç±¤
            sortedTags.forEach(tag => {
                const btn = document.createElement('button');
                btn.className = 'filter-button';
                btn.textContent = `#${tag}`;
                btn.dataset.tag = tag;
                btn.addEventListener('click', handleTagClick);
                tagButtonsContainer.appendChild(btn);
            });
        }

        /********** æ¨™ç±¤é»æ“Šè™•ç†ï¼ˆé™åˆ¶æœ€å¤š3å€‹ï¼Œæ”¯æ´ #éš¨æ©Ÿï¼‰ **********/
        function handleTagClick(e) {
            const btn = e.currentTarget;
            const clickedTag = btn.dataset.tag;
            const isSelected = btn.classList.contains('selected');
            const maxSel = 3;
            const randomBtn = document.querySelector('[data-tag="#éš¨æ©Ÿ"]');

            if (clickedTag === '#éš¨æ©Ÿ') {
                if (!isSelected) {
                    currentSelectedTags.clear();
                    currentSelectedTags.add('#éš¨æ©Ÿ');
                    document.querySelectorAll('.filter-button').forEach(x => x.classList.remove('selected'));
                    btn.classList.add('selected');
                } else {
                    // è‹¥å·²é¸å°±ä¸åšä»»ä½•äº‹
                    return;
                }
            } else {
                if (isSelected) {
                    btn.classList.remove('selected');
                    currentSelectedTags.delete(clickedTag);
                } else {
                    if (currentSelectedTags.has('#éš¨æ©Ÿ') || currentSelectedTags.size < maxSel) {
                        if (currentSelectedTags.has('#éš¨æ©Ÿ')) {
                            currentSelectedTags.delete('#éš¨æ©Ÿ');
                            randomBtn.classList.remove('selected');
                        }
                        btn.classList.add('selected');
                        currentSelectedTags.add(clickedTag);
                    } else {
                        alert(`æœ€å¤šåªèƒ½é¸æ“‡ ${maxSel} å€‹æ¨™ç±¤ï¼`);
                        return;
                    }
                }

                // è‹¥éƒ½æ²’é¸ï¼Œå›å¾© #éš¨æ©Ÿ
                if (currentSelectedTags.size === 0) {
                    currentSelectedTags.add('#éš¨æ©Ÿ');
                    randomBtn.classList.add('selected');
                }
            }

            // è®Šæ›´ç¯©é¸æ™‚å¯ä»¥ç«‹å³ç”Ÿæˆæ–°å¥ï¼ˆå¯ä¿®æ”¹ç‚ºä¸è‡ªå‹•ï¼‰
            generateRandomQuote();
        }

        /********** æ¨™ç±¤æœå°‹åŠŸèƒ½ï¼ˆå³æ™‚éæ¿¾æŒ‰éˆ•ï¼‰ **********/
        tagSearchInput.addEventListener('input', (e) => {
            const q = e.target.value.trim().toLowerCase();
            document.querySelectorAll('#tag-buttons .filter-button').forEach(btn => {
                // ä¸éæ¿¾ #éš¨æ©Ÿ æŒ‰éˆ•
                if (btn.dataset.tag === '#éš¨æ©Ÿ') return;
                const text = btn.textContent.toLowerCase();
                if (text.indexOf(q) !== -1) {
                    btn.style.display = 'inline-block';
                } else {
                    btn.style.display = 'none';
                    // è‹¥è¢«éš±è—ä¸”æ˜¯é¸ä¸­ç‹€æ…‹ï¼Œå–æ¶ˆé¸å–
                    if (btn.classList.contains('selected')) {
                        btn.classList.remove('selected');
                        currentSelectedTags.delete(btn.dataset.tag);
                    }
                }
            });

            // è‹¥æœå°‹æŠŠæ‰€æœ‰æ¨™ç±¤éƒ½éš±è—ï¼ˆåªå‰© #éš¨æ©Ÿï¼‰ï¼Œç¢ºä¿è‡³å°‘ä¸€å€‹é¸å–
            if ([...currentSelectedTags].filter(t => t !== '#éš¨æ©Ÿ').length === 0) {
                const randomBtn = document.querySelector('[data-tag="#éš¨æ©Ÿ"]');
                currentSelectedTags.clear();
                currentSelectedTags.add('#éš¨æ©Ÿ');
                document.querySelectorAll('.filter-button').forEach(x => x.classList.remove('selected'));
                randomBtn.classList.add('selected');
            }
        });

        /********** ç”Ÿæˆé‚è¼¯ï¼ˆæœƒæ›´æ–°è¨ˆæ•¸ï¼‰ **********/
        function generateRandomQuote(showSparkles = true) {
            let availableQuotes = [];

            if (currentSelectedTags.has('#éš¨æ©Ÿ')) {
                availableQuotes = quotes;
            } else {
                availableQuotes = quotes.filter(q => q.tags.some(t => currentSelectedTags.has(t)));
            }

            if (availableQuotes.length === 0) {
                quoteText.textContent = "æ‰¾ä¸åˆ°ç¬¦åˆæ‰€é¸æ¨™ç±¤çš„å¥å­ï¼Œè«‹æ›´æ”¹é¸æ“‡ã€‚";
                quoteFooterDiv.innerHTML = "";
                lastQuote = null;
                return;
            }

            // è‹¥æœ‰è¨­å®šä»Šæ—¥é‡‘å¥ä¸”æˆ‘å€‘å°šæœªæ˜ç¢ºè¦æ±‚ã€Œéä»Šæ—¥é‡‘å¥ã€ï¼Œå‰‡é è¨­é¡¯ç¤ºä»Šæ—¥é‡‘å¥ï¼ˆåªæœ‰åœ¨è¼‰å…¥é é¢æ™‚æœƒç‰¹åˆ¥è™•ç†ï¼‰
            // é€™è£¡çš„ generateRandomQuote æœƒç”¨ä¸€èˆ¬æ©Ÿåˆ¶ï¼ˆéš¨æ©Ÿï¼‰ï¼Œä½† onload æ™‚æœƒå¦è¡Œé¡¯ç¤º dailyQuote
            let randomQuoteObj;
            let newIndex;
            let attempts = 0;
            const maxAttempts = 12;

            do {
                newIndex = Math.floor(Math.random() * availableQuotes.length);
                randomQuoteObj = availableQuotes[newIndex];
                attempts++;
            } while (randomQuoteObj === lastQuote && availableQuotes.length > 1 && attempts < maxAttempts);

            lastQuote = randomQuoteObj;

            // éš¨æ©Ÿæ–‡å­—é¡è‰²
            const randomColorIndex = Math.floor(Math.random() * softColors.length);
            quoteText.style.color = softColors[randomColorIndex];

            // é‡è¨­å‹•ç•«
            quoteText.style.animation = 'none';
            void quoteText.offsetHeight;
            quoteText.style.animation = 'fadeIn 0.8s ease-out';

            // é¡¯ç¤ºæ–‡å­—èˆ‡è‹±æ–‡ï¼ˆè‹±æ–‡ä»¥ <strong> æ¨™å‡ºï¼‰
            const fullText = randomQuoteObj.zh + (randomQuoteObj.en ? `**${randomQuoteObj.en}**` : '');
            quoteText.innerHTML = fullText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');

            // é¡¯ç¤ºæ¨™ç±¤
            quoteFooterDiv.innerHTML = randomQuoteObj.tags.map(t => `<span class="tag-display">#${t}</span>`).join('');

            // è¨ˆæ•¸æ›´æ–°
            quoteCount++;
            saveQuoteData();

            // å°å‹•ç•«æ•ˆæœï¼šå¡ç‰‡ pop + æ˜Ÿå…‰
            quoteBox.classList.add('pop');
            setTimeout(()=> quoteBox.classList.remove('pop'), 300);

            if (showSparkles) createSparkles(12);
        }

        /********** ä»Šæ—¥é‡‘å¥ï¼ˆæ–¹æ¡ˆ Aï¼‰åˆå§‹åŒ–é¡¯ç¤º **********/
        function ensureDailyQuoteAndShow() {
            // è‹¥ dailyQuoteIndex ç‚º nullï¼Œå‰‡æ–¼ä»Šæ—¥ç¬¬ä¸€æ¬¡è¼‰å…¥æ™‚éš¨æ©ŸæŒ‘ä¸€å€‹ index ä¸¦å„²å­˜
            if (dailyQuoteIndex === null) {
                dailyQuoteIndex = Math.floor(Math.random() * quotes.length);
                saveQuoteData();
                // é¡¯ç¤º badgeï¼ˆä»£è¡¨ä»Šå¤©å·²é¸ä¸€çµ„ä»Šæ—¥é‡‘å¥ï¼‰
                showDailyQuote();
            } else {
                // å·²æœ‰ä»Šæ—¥é‡‘å¥ï¼Œç›´æ¥é¡¯ç¤º
                showDailyQuote();
            }
        }

        function showDailyQuote() {
            if (typeof dailyQuoteIndex === 'number' && quotes[dailyQuoteIndex]) {
                const q = quotes[dailyQuoteIndex];
                // é¡¯ç¤ºä¸”æ¨™ç¤ºç‚ºä»Šæ—¥é‡‘å¥ï¼ˆbadgeï¼‰
                quoteText.innerHTML = q.zh + (q.en ? ` <strong>${q.en}</strong>` : '');
                quoteFooterDiv.innerHTML = q.tags.map(t => `<span class="tag-display">#${t}</span>`).join('');
                lastQuote = q;
                dailyBadge.style.display = 'block';
                // è®“æ¯æ—¥é‡‘å¥ä¸ç®—å…¥ç•¶æ—¥è¨ˆæ•¸ï¼Œé™¤éä½¿ç”¨è€…æŒ‰ GO!ï¼ˆé€™æ˜¯è¨­è¨ˆé¸é …ï¼‰
                // è‹¥ä½ æƒ³è¦åœ¨é¡¯ç¤ºä»Šæ—¥é‡‘å¥æ™‚ä¹ŸæŠŠ count++ï¼ŒæŠŠä¸‹é¢è¨»è§£è§£é™¤ï¼š
                // quoteCount++; saveQuoteData();
            }
        }

        /********** ç”Ÿæˆæ™‚æ˜Ÿå…‰æ•ˆæœï¼ˆç°¡å–® DOM sparklesï¼‰ **********/
        function createSparkles(n) {
            const rect = quoteBox.getBoundingClientRect();
            const container = document.body;
            for (let i=0;i<n;i++){
                const s = document.createElement('div');
                s.className = 'sparkle';
                // éš¨æ©Ÿä½ç½®åœ¨ quoteBox ç¯„åœå…§ (ä»¥ box ä¸­å¿ƒç‚ºåŸºæº–å°ç¯„åœ)
                const rx = rect.left + rect.width * (0.25 + Math.random()*0.5);
                const ry = rect.top + rect.height * (0.2 + Math.random()*0.6);
                s.style.left = (rx + (Math.random()*40 - 20)) + 'px';
                s.style.top = (ry + (Math.random()*30 - 15)) + 'px';
                // éš¨æ©Ÿå¤§å°
                const size = 6 + Math.random()*10;
                s.style.width = s.style.height = size + 'px';
                // éš¨æ©Ÿå»¶é²
                s.style.animationDelay = (Math.random()*120) + 'ms';
                container.appendChild(s);
                setTimeout(()=> s.remove(), 900 + Math.random()*200);
            }
        }

        /********** åˆå§‹åŒ–ï¼šè¼‰å…¥è³‡æ–™ + å»ºç«‹æŒ‰éˆ• + é¡¯ç¤ºä»Šæ—¥é‡‘å¥ **********/
        function init() {
            loadQuoteData();
            createTagButtons();

            // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¼‰å…¥ï¼ˆdailyQuoteIndex nullï¼‰æˆ–æ˜¯å·²æœ‰ dailyQuoteï¼Œç¢ºä¿å…ˆé¡¯ç¤ºä»Šæ—¥é‡‘å¥ä½œç‚ºé è¨­
            ensureDailyQuoteAndShow();

            // ç›£è½ GO æŒ‰éˆ•
            generateButton.addEventListener('click', ()=> {
                // ç•¶ä½¿ç”¨è€…æŒ‰äº† GOï¼Œè¦–ç‚ºã€Œä¸»å‹•å–å¾—æ–°å¥ã€ï¼Œé—œé–‰ä»Šæ—¥ badgeï¼ˆstill keep dailyQuoteIndexï¼‰
                dailyBadge.style.display = 'none';
                generateRandomQuote(true);
            });
        }

        window.onload = init;

        /********** ç²’å­èƒŒæ™¯ (canvas star rain) ---------- */
        (function starCanvas(){
            const canvas = document.getElementById('star-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let W = canvas.width = window.innerWidth;
            let H = canvas.height = window.innerHeight;
            const stars = [];
            const STAR_COUNT = Math.max(40, Math.floor((W*H)/60000)); // æ ¹æ“šè¦–çª—å¤§å°èª¿æ•´æ˜Ÿæ•¸

            function rand(min,max){ return Math.random()*(max-min)+min; }
            function initStars(){
                stars.length = 0;
                for (let i=0;i<STAR_COUNT;i++){
                    stars.push({
                        x: Math.random()*W,
                        y: Math.random()*H,
                        r: rand(0.3,1.1),
                        vx: rand(-0.02,0.02),
                        vy: rand(0.05,0.3),
                        alpha: rand(0.2,0.95),
                        twinkleSpeed: rand(0.002,0.015)
                    });
                }
            }

            function resize() {
                W = canvas.width = window.innerWidth;
                H = canvas.height = window.innerHeight;
                initStars();
            }
            window.addEventListener('resize', resize);

            function draw(){
                ctx.clearRect(0,0,W,H);
                // è¼•å¾®æ¼¸å±¤èƒŒæ™¯ (èˆ‡ CSS èƒŒæ™¯ç–Šåˆ)
                // ctx.fillStyle = 'rgba(232,206,224,0.02)';
                // ctx.fillRect(0,0,W,H);

                for (let s of stars){
                    s.x += s.vx;
                    s.y += s.vy;
                    if (s.y > H + 10) { s.y = -10; s.x = Math.random()*W; }
                    if (s.x > W + 10) { s.x = -10; }
                    if (s.x < -10) { s.x = W + 10; }
                    // twinkle
                    s.alpha += Math.sin(Date.now() * s.twinkleSpeed) * 0.003;
                    s.alpha = Math.max(0.12, Math.min(1, s.alpha));
                    ctx.beginPath();
                    ctx.globalAlpha = s.alpha * 0.9;
                    ctx.fillStyle = '#FFF';
                    ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
                    ctx.fill();
                }
                ctx.globalAlpha = 1;
                requestAnimationFrame(draw);
            }

            initStars();
            draw();
        })();
    </script>
</body>
</html>
